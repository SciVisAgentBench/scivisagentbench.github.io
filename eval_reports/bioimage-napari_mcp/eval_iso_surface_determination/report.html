<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluation Report - bioimage_agent</title>
    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .header-meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 1.1em;
            opacity: 0.95;
        }

        .agent-name {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
        }

        .timestamp {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .summary {
            padding: 40px;
            background: #f8f9fa;
            border-bottom: 3px solid #667eea;
        }

        .summary h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 2em;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .summary-card h3 {
            color: #667eea;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .summary-card .value {
            font-size: 2.5em;
            font-weight: 700;
            color: #333;
        }

        .summary-card .sub-value {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .score-excellent { color: #10b981; }
        .score-good { color: #3b82f6; }
        .score-fair { color: #f59e0b; }
        .score-poor { color: #ef4444; }

        .config-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .config-info h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .config-item {
            display: flex;
            flex-direction: column;
        }

        .config-item label {
            font-weight: 600;
            color: #666;
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        .config-item value {
            font-size: 1em;
            color: #333;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .case-nav {
            padding: 30px 40px;
            background: white;
            border-bottom: 2px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .case-nav h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .case-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .case-link {
            padding: 8px 16px;
            background: #f3f4f6;
            border-radius: 6px;
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .case-link:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .case-section {
            padding: 40px;
            border-bottom: 3px solid #f3f4f6;
        }

        .case-section:last-child {
            border-bottom: none;
        }

        .case-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .case-title-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .case-title {
            font-size: 1.8em;
            color: #333;
            font-weight: 700;
        }

        .status-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .status-failed {
            background: #fee2e2;
            color: #dc2626;
        }

        .status-warning {
            background: #fef3c7;
            color: #d97706;
        }

        .case-score {
            font-size: 1.5em;
            font-weight: 700;
            padding: 10px 25px;
            border-radius: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .case-content {
            display: grid;
            gap: 30px;
        }

        .section-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .section-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .task-description {
            background: white;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            border: 1px solid #e5e7eb;
        }

        .image-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .image-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .image-box h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .image-box img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
        }

        .image-box .no-image {
            width: 100%;
            height: 300px;
            background: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-size: 1.1em;
        }

        .rubric-scores {
            display: grid;
            gap: 15px;
        }

        .rubric-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .rubric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .rubric-title {
            font-weight: 700;
            color: #333;
            flex: 1;
        }

        .rubric-score {
            font-size: 1.3em;
            font-weight: 700;
            padding: 5px 15px;
            border-radius: 20px;
            background: #667eea;
            color: white;
        }

        .rubric-criterion {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            color: #333;
            line-height: 1.6;
            font-style: italic;
        }

        .rubric-criterion strong {
            color: #667eea;
            font-style: normal;
        }

        .rubric-explanation {
            color: #666;
            line-height: 1.6;
            margin-top: 10px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #667eea;
        }

        .rubric-explanation strong {
            color: #764ba2;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .metric-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .metric-label {
            font-size: 0.85em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #667eea;
        }

        .metric-subvalue {
            font-size: 0.9em;
            color: #999;
            margin-top: 5px;
        }

        .code-similarity {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #667eea;
        }

        .code-similarity h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .code-sim-score {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .code-sim-details {
            color: #666;
            font-size: 0.9em;
        }

        .expandable {
            cursor: pointer;
            user-select: none;
        }

        .expandable::before {
            content: '‚ñº ';
            display: inline-block;
            transition: transform 0.3s;
        }

        .expandable.collapsed::before {
            transform: rotate(-90deg);
        }

        .expandable-content {
            margin-top: 15px;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .expandable-content.collapsed {
            max-height: 0;
            margin-top: 0;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .footer p {
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .image-comparison {
                grid-template-columns: 1fr;
            }

            .case-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .case-title-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .case-title {
                font-size: 1.5em;
            }
        }
    
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üéØ SciVisAgentBench Evaluation Report</h1>
            <div class="header-meta">
                <span class="agent-name">bioimage_agent</span>
                <span class="timestamp">Generated: 2026-02-16T17:32:46.935846</span>
            </div>
        </header>

        
        <section class="summary">
            <h2>üìä Overall Performance</h2>

            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Overall Score</h3>
                    <div class="value score-poor">
                        40.0%
                    </div>
                    <div class="sub-value">
                        14/35 Points
                    </div>
                </div>

                <div class="summary-card">
                    <h3>Test Cases</h3>
                    <div class="value">
                        1/1
                    </div>
                    <div class="sub-value">
                        Completed Successfully
                    </div>
                </div>

                <div class="summary-card">
                    <h3>Avg Vision Score</h3>
                    <div class="value">
                        40.0%
                    </div>
                    <div class="sub-value">
                        Visualization Quality
                    </div>
                </div>

                <div class="summary-card">
                    <h3>Avg Code Similarity</h3>
                    <div class="value">
                        0.0%
                    </div>
                    <div class="sub-value">
                        Code Quality Match
                    </div>
                </div>

                <div class="summary-card">
                    <h3>PSNR (Scaled)</h3>
                    <div class="value">
                        N/A
                    </div>
                    <div class="sub-value">
                        Peak SNR (0/1 valid)
                    </div>
                </div>

                <div class="summary-card">
                    <h3>SSIM (Scaled)</h3>
                    <div class="value">
                        N/A
                    </div>
                    <div class="sub-value">
                        Structural Similarity
                    </div>
                </div>

                <div class="summary-card">
                    <h3>LPIPS (Scaled)</h3>
                    <div class="value">
                        N/A
                    </div>
                    <div class="sub-value">
                        Perceptual Distance
                    </div>
                </div>

                <div class="summary-card">
                    <h3>Completion Rate</h3>
                    <div class="value">
                        100.0%
                    </div>
                    <div class="sub-value">
                        Tasks completed
                    </div>
                </div>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <h4 style="color: #667eea; margin-bottom: 10px;">‚ÑπÔ∏è About Scaled Metrics</h4>
                <p style="color: #666; line-height: 1.6; margin: 0;">
                    <strong>Scaled metrics</strong> account for completion rate to enable fair comparison across different evaluation modes.
                    Formula: <em>PSNR<sub>scaled</sub> = (completed_cases / total_cases) √ó avg(PSNR)</em>,
                    <em>SSIM<sub>scaled</sub> = (completed_cases / total_cases) √ó avg(SSIM)</em>,
                    <em>LPIPS<sub>scaled</sub> = 1.0 - (completed_cases / total_cases) √ó (1.0 - avg(LPIPS))</em>.
                    Cases with infinite PSNR (perfect match) are excluded from PSNR calculation.
                </p>
            </div>

            <div class="config-info">
                <h3>üîß Configuration</h3>
                <div class="config-grid">
                    <div class="config-item">
                        <label>Provider</label>
                        <value>anthropic</value>
                    </div>
                    <div class="config-item">
                        <label>Model</label>
                        <value>claude-sonnet-4-5</value>
                    </div>
                    <div class="config-item">
                        <label>Base URL</label>
                        <value>api.anthropic.com</value>
                    </div>
                    <div class="config-item">
                        <label>Input Price</label>
                        <value>$0.80</value>
                    </div>
                    <div class="config-item">
                        <label>Output Price</label>
                        <value>$4.00</value>
                    </div>
                </div>
            </div>
        </section>
    

        <nav class="case-nav">
            <h3>Jump to Case:</h3>
            <div class="case-links">
                <a href="#operation_1" class="case-link">operation_1</a>
            </div>
        </nav>

        
        <section class="case-section" id="operation_1">
            <div class="case-header">
                <div class="case-title-group">
                    <h2 class="case-title">üìù operation_1</h2>
                    <span class="status-badge status-warning">‚ö†Ô∏è LOW SCORE</span>
                </div>
                <div class="case-score">14/35 (40.0%)</div>
            </div>

            <div class="case-content">
                <div class="section-box">
                    <h3>üìã Task Description</h3>
                    <div class="task-description">1. Read the file "data/dataset_003/eval_iso_surface_determination_target_1.txt" to get the target iso-surface values for different tooth structures.
2. Load data/dataset_003/dataset_003.tif into napari. 
3. Switch to 3D view mode and set the rendering to iso. 
4. Find the iso surface value that shows the target clearly.
5. Rotate the camera to several angles and take a screenshot of the result each time to check if the target structure is clearly visible from different angles.
6. If the target structure is not clearly visible, adjust the iso surface value and take a screenshot again.
7. Stop when the target structure is clearly visible or you have tried five different iso surface values.
8. Save the final screenshot to "eval_iso_surface_determination/screenshot.png".
</div>
                </div>

                
        <div class="section-box">
            <h3>üñºÔ∏è Visualization Comparison</h3>
            <div class="image-comparison">
                <div class="image-box">
                    <h4>Ground Truth</h4>
                    <img src="images/operation_1_gt.png" alt="Ground Truth" onerror="this.parentElement.innerHTML='<div class=\'no-image\'>Image not available</div>'">
                </div>
                <div class="image-box">
                    <h4>Agent Result</h4>
                    <img src="images/operation_1_result.png" alt="Result" onerror="this.parentElement.innerHTML='<div class=\'no-image\'>Image not available</div>'">
                </div>
            </div>
        </div>
    

                
        <div class="section-box">
            <h3 class="expandable">üìè Vision Evaluation Rubrics</h3>
            <div class="expandable-content">
                
        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
            <h4 style="color: #667eea; margin-bottom: 10px;">Score Summary</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 10px;">
                <div style="background: white; padding: 10px; border-radius: 6px; text-align: center;">
                    <div style="font-size: 0.85em; color: #666; margin-bottom: 5px;">Total Score</div>
                    <div style="font-size: 1.5em; font-weight: 700; color: #667eea;">0/20</div>
                </div>
                <div style="background: white; padding: 10px; border-radius: 6px; text-align: center;">
                    <div style="font-size: 0.85em; color: #666; margin-bottom: 5px;">Goals</div>
                    <div style="font-size: 1.5em; font-weight: 700; color: #667eea;">2</div>
                </div>
                <div style="background: white; padding: 10px; border-radius: 6px; text-align: center;">
                    <div style="font-size: 0.85em; color: #666; margin-bottom: 5px;">Points/Goal</div>
                    <div style="font-size: 1.5em; font-weight: 700; color: #667eea;">10</div>
                </div>
            </div>
        </div>
    
                <div class="rubric-scores" style="margin-top: 15px;">
                    
            <div class="rubric-item">
                <div class="rubric-header">
                    <div class="rubric-title">Goal 1</div>
                    <div class="rubric-score">0/10</div>
                </div>
                <div class="rubric-criterion">
                    <strong>Criterion:</strong> 1. Does the result rendering look similar to ground truth?
                </div>
                <div class="rubric-explanation">
                    <strong>Judge's Assessment:</strong> The ground truth shows a clearly identifiable 3D tooth-like surface rendering centered on a black background, with smooth shading and specular highlights. The result image instead shows a flat, noisy/pebbled texture filling the frame (no discernible tooth geometry, silhouette, or comparable lighting). Overall composition, subject, and rendering style do not match at all.
                </div>
            </div>
         
            <div class="rubric-item">
                <div class="rubric-header">
                    <div class="rubric-title">Goal 2</div>
                    <div class="rubric-score">0/10</div>
                </div>
                <div class="rubric-criterion">
                    <strong>Criterion:</strong> Does the visualization show the target structure clearly?
                </div>
                <div class="rubric-explanation">
                    <strong>Judge's Assessment:</strong> In the ground truth, the target structure (tooth) is clearly visible with a distinct outline and recognizable features (crown and roots). In the result, there is no clear target structure‚Äîonly a granular texture pattern‚Äîso the intended anatomical/3D structure is not shown or is completely obscured.
                </div>
            </div>
        
                </div>
                <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">Overall Assessment</h4>
                    <p style="color: #666;">The result visualization does not resemble the ground truth and fails to display the target 3D structure. Both visual similarity and structural clarity are not achieved.</p>
                </div>
            </div>
        </div>
    

                

                
        <div class="section-box">
            <h3>üìä Detailed Metrics</h3>
            <div class="metrics-grid">
            <div class="metric-box">
                <div class="metric-label">Visualization Quality</div>
                <div class="metric-value">0/20</div>
            </div>
        
            <div class="metric-box">
                <div class="metric-label">Output Generation</div>
                <div class="metric-value">5/5</div>
            </div>
        
            <div class="metric-box">
                <div class="metric-label">Efficiency</div>
                <div class="metric-value">9/10</div>
                <div class="metric-subvalue">
                    Completed in 21.19 seconds (very good)
                </div>
            </div>
        
            <div class="metric-box">
                <div class="metric-label">Input Tokens</div>
                <div class="metric-value">7,435</div>
            </div>
        
            <div class="metric-box">
                <div class="metric-label">Output Tokens</div>
                <div class="metric-value">39</div>
            </div>
        
            <div class="metric-box">
                <div class="metric-label">Total Tokens</div>
                <div class="metric-value">7,474</div>
            </div>
        </div>
            
        </div>
    
            </div>
        </section>
    

        <footer class="footer">
            <p>Generated by SciVisAgentBench Evaluation Reporter</p>
            <p>Timestamp: 2026-02-16T17:32:46.935846</p>
        </footer>
    </div>

    <script>
        
        // Expandable sections
        document.querySelectorAll('.expandable').forEach(element => {
            element.addEventListener('click', function() {
                this.classList.toggle('collapsed');
                const content = this.nextElementSibling;
                if (content && content.classList.contains('expandable-content')) {
                    content.classList.toggle('collapsed');
                }
            });
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Initialize expandable sections as collapsed
        document.querySelectorAll('.expandable-content').forEach(content => {
            content.style.maxHeight = content.scrollHeight + 'px';
        });

        console.log('üìä Evaluation Report Loaded');
    
    </script>
</body>
</html>
